<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>Bruce Lab</title>
        <!-- Dark mode BEFORE paint -->
        <script>// Global helper so language buttons can always call it
        function setProcessClass() {
        const container = document.querySelector('main.content-wrap');
        const isZH = document.documentElement.getAttribute('data-lang') === 'zh';
        const en = container ? container.querySelector('.lang-en') : null;
        const zh = container ? container.querySelector('.lang-zh') : null;
        if (en) en.classList.remove('mathjax-process');
        if (zh) zh.classList.remove('mathjax-process');
        const target = isZH ? zh : en;
        if (target) target.classList.add('mathjax-process');
        return target;
        }</script><script>
                (function() {
                var savedTheme = localStorage.getItem('theme') || 'dark';
                document.documentElement.setAttribute('data-theme', savedTheme);
                var savedLang = localStorage.getItem('lang') || 'en';
                document.documentElement.setAttribute('data-lang', savedLang);
                })();
            </script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet"/>
        <!-- ✅ 在这里引入你自己的 CSS -->
        <link rel="stylesheet" href="../style.css">
        <script>
            window.MathJax = {
            loader: {load: ['[tex]/ams', '[tex]/color', '[tex]/textmacros']},
            tex: {
                packages: {'[+]': ['ams','color','textmacros']},
                inlineMath: [['\\(','\\)']],
                displayMath: [['\\[','\\]']],
                tags: 'ams',   // enable \label, \eqref, etc.
                processEscapes: true
            },
            options: {skipHtmlTags: ['script','noscript','style','textarea','pre','code'], processHtmlClass: 'mathjax-process'}
            };
            </script><script defer="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>
        <script>
                (function() {
                function applyTheme(mode) {
                    document.documentElement.setAttribute('data-theme', mode);
                    localStorage.setItem('theme', mode);
                }
                function applyLang(lang) {
                    document.documentElement.setAttribute('data-lang', lang);
                    localStorage.setItem('lang', lang);
                    // rebuild both sidebars based on visible content
                    rebuildNavs();
                }
                window.__setLight = function() { applyTheme('light'); }
                window.__setDark  = function() { applyTheme('dark'); }
                window.__setEN    = function() { applyLang('en'); const target = setProcessClass(); if (window.MathJax && target) { MathJax.typesetClear(); MathJax.typesetPromise([target]); } }
                window.__setZH    = function() { applyLang('zh'); const target = setProcessClass(); if (window.MathJax && target) { MathJax.typesetClear(); MathJax.typesetPromise([target]); } }

                document.addEventListener("DOMContentLoaded", () => {
                function setProcessClass() {
                    const container = document.querySelector('main.content-wrap');
                    const isZH = document.documentElement.getAttribute('data-lang') === 'zh';
                    const en = container.querySelector('.lang-en');
                    const zh = container.querySelector('.lang-zh');
                    if (en) en.classList.remove('mathjax-process');
                    if (zh) zh.classList.remove('mathjax-process');
                    const target = isZH ? zh : en;
                    if (target) target.classList.add('mathjax-process');
                    return target;
                }

                    const target = setProcessClass();
                    if (window.MathJax && target) { MathJax.typesetPromise([target]); }

                    rebuildNavs();
                    observeHeadings();
                    setupBackToTop();
                });

                function slugify(text) {
                    return text.toLowerCase().trim()
                    .replace(/[^a-z0-9\u4e00-\u9fa5\s-]/g, '')
                    .replace(/\s+/g, '-')
                    .replace(/-+/g, '-');
                }
                function ensureId(el) { if (!el.id) el.id = slugify(el.textContent); return el.id; }

                function rebuildNavs() {
                    const container = document.querySelector('main.content-wrap');
                    const isZH = document.documentElement.getAttribute('data-lang') === 'zh';
                    const scope = isZH ? container.querySelector('.lang-zh') : container.querySelector('.lang-en');
                    
                    // Page TOC
                    const toc = document.querySelector('#pageToc');
                    toc.innerHTML = '';
                    const hs = Array.from(scope.querySelectorAll('h1, h2, h3'));
                    hs.forEach(h => ensureId(h));
                    const ul2 = document.createElement('ul');
                    ul2.className = 'list-unstyled toc';
                    hs.forEach(h => {
                    const li = document.createElement('li');
                    li.style.marginLeft = (h.tagName === 'H1' ? 0 : h.tagName === 'H2' ? 12 : 24) + 'px';
                    const a = document.createElement('a');
                    a.href = '#' + h.id; a.textContent = h.textContent;
                    li.appendChild(a); ul2.appendChild(li);
                    });
                    toc.appendChild(ul2);
                }

                function observeHeadings() {
                    const observer = new IntersectionObserver((entries) => {
                    const links = Array.from(document.querySelectorAll('.toc a, .bd-sidenav a'));
                    const map = new Map(links.map(a => [a.getAttribute('href'), a]));
                    entries.forEach(entry => {
                        const id = '#' + entry.target.id;
                        const link = map.get(id);
                        if (link) {
                        if (entry.isIntersecting) link.classList.add('active');
                        else link.classList.remove('active');
                        }
                    });
                    }, { rootMargin: '0px 0px -70% 0px', threshold: 0.1 });
                    document.querySelectorAll('.content-wrap h1, .content-wrap h2, .content-wrap h3').forEach(h => observer.observe(h));
                }

                function setupBackToTop() {
                    const btn = document.getElementById('backToTop');
                    window.addEventListener('scroll', () => {
                    btn.style.display = (window.scrollY > 400) ? 'block' : 'none';
                    });
                    btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                }
                })();
            </script>
    </head>

    <body>
        <header class="page-header">
            <h1 class="doc-title m-0">Bruce Lab</h1>
            <div class="d-flex align-items-center gap-1">
                <div aria-label="Theme" class="btn-group me-1" role="group">
                    <button class="btn-icon" onclick="__setLight()" title="Light"><i class="fa-solid fa-sun"></i></button>
                    <button class="btn-icon" onclick="__setDark()" title="Dark"><i class="fa-solid fa-moon"></i></button>
                </div>
                <div aria-label="Language" class="btn-group" role="group">
                    <button class="btn btn-sm btn-outline-secondary" onclick="__setEN()">EN</button>
                    <button class="btn btn-sm btn-outline-secondary" onclick="__setZH()">中文</button>
                </div>
            </div>
        </header>
        <div class="layout">
            <aside class="sidebar-primary">
                <div class="brand-title">Think-Style</div>
                <div class="brand-sub">Demo</div>
                <nav aria-label="Chapters" id="sideNav">
                    <!-- 英文列表 -->
                    <ul class="list-unstyled bd-sidenav nav-en">
                        <li><a class="nav-link" href="Quadratic_Functions/Quadratic_Functions.html">Quadratic_Functions</a></li>
                        <li><a class="nav-link" href="#">to be continued 2</a></li>
                        <li><a class="nav-link" href="#">to be continued 3</a></li>
                        <li><a class="nav-link" href="#">to be continued 4</a></li>
                        <li><a class="nav-link" href="#">to be continued 5</a></li>
                        <li><a class="nav-link" href="#">to be continued 6</a></li>
                        <li><a class="nav-link" href="#">to be continued 7</a></li>
                    </ul>
                    <!-- 中文列表 -->
                    <ul class="list-unstyled bd-sidenav nav-zh">
                        <li><a class="nav-link" href="Quadratic_Functions/Quadratic_Functions.html">一元二次函数</a></li>
                        <li><a class="nav-link" href="#">敬请期待 2</a></li>
                        <li><a class="nav-link" href="#">敬请期待 3</a></li>
                        <li><a class="nav-link" href="#">敬请期待 4</a></li>
                        <li><a class="nav-link" href="#">敬请期待 5</a></li>
                        <li><a class="nav-link" href="#">敬请期待 6</a></li>
                        <li><a class="nav-link" href="#">敬请期待 7</a></li>
                    </ul>
                </nav>
            </aside>
            <main class="content-wrap">
                <div class="lang-zh">
                    <img src="Creation_of_Adam.jpg" alt="Creation_of_Adam" style="width:100%; height:100%; object-fit:contain;">
                    <h1 style="font-family:'KaiTi','STKaiti','楷体','Times New Roman',serif; text-align:center;">教育或许, 没有任何意义</p>
                </div>
                <div class="lang-en">
                    <img src="Creation_of_Adam.jpg" alt="Creation_of_Adam" style="width:100%; height:100%; object-fit:contain;">
                    <h1 style="font-family: 'Times New Roman'; text-align:center;">Perhaps education has no meaning, after all.</p>
                </div>
            </main>
        </div>
        <button class="btn btn-primary rounded-pill" id="backToTop">
            <i class="fa-solid fa-arrow-up"></i> Back to top
        </button>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>

