<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Anchor's Home</title>

        <!-- Theme BEFORE paint (prevents flash) -->
        <script>
            (function () {
            var savedTheme = localStorage.getItem("theme") || "dark";
            document.documentElement.setAttribute("data-theme", savedTheme);
            })();
        </script>

        <!-- CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
        <link rel="stylesheet" href="../../style.css" />

        <!-- MathJax (always typeset the whole page) -->
        <script>
            window.MathJax = {
            loader: { load: ["[tex]/ams", "[tex]/color", "[tex]/textmacros"] },
            tex: {
                packages: { "[+]": ["ams", "color", "textmacros"] },
                inlineMath: [["\\(", "\\)"]],
                displayMath: [["\\[", "\\]"]],
                tags: "ams",
                processEscapes: true
            },
            options: {
                skipHtmlTags: ["script", "noscript", "style", "textarea", "pre", "code"]
            }
            };
        </script>
        <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>

        <!-- Page helpers: theme toggle + TOC + scroll highlight + back-to-top -->
        <script>
            (function () {
            function applyTheme(mode) {
                document.documentElement.setAttribute("data-theme", mode);
                localStorage.setItem("theme", mode);
            }

            // Keep these because your header buttons call them
            window.__setLight = function () { applyTheme("light"); };
            window.__setDark  = function () { applyTheme("dark"); };

            document.addEventListener("DOMContentLoaded", () => {
                // MathJax: typeset whole document once
                if (window.MathJax) MathJax.typesetPromise();

                rebuildPageToc();
                observeHeadings();
                setupBackToTop();
            });

            function slugify(text) {
                return text.toLowerCase().trim()
                .replace(/[^a-z0-9\u4e00-\u9fa5\s-]/g, "")
                .replace(/\s+/g, "-")
                .replace(/-+/g, "-");
            }

            function ensureId(el) {
                if (!el.id) el.id = slugify(el.textContent);
                return el.id;
            }

            function rebuildPageToc() {
                const toc = document.querySelector("#pageToc");
                const scope = document.querySelector("main.content-wrap") || document.body;
                if (!toc) return;

                toc.innerHTML = "";
                const hs = Array.from(scope.querySelectorAll("h1, h2, h3"));
                hs.forEach(h => ensureId(h));

                const ul = document.createElement("ul");
                ul.className = "list-unstyled toc";

                hs.forEach(h => {
                const li = document.createElement("li");
                li.style.marginLeft = (h.tagName === "H1" ? 0 : h.tagName === "H2" ? 12 : 24) + "px";

                const a = document.createElement("a");
                a.href = "#" + h.id;
                a.textContent = h.textContent;

                li.appendChild(a);
                ul.appendChild(li);
                });

                toc.appendChild(ul);
            }

            function observeHeadings() {
                const headings = document.querySelectorAll(".content-wrap h1, .content-wrap h2, .content-wrap h3");
                if (!headings.length) return;

                const observer = new IntersectionObserver((entries) => {
                const links = Array.from(document.querySelectorAll(".toc a, .bd-sidenav a"));
                const map = new Map(links.map(a => [a.getAttribute("href"), a]));

                entries.forEach(entry => {
                    const id = "#" + entry.target.id;
                    const link = map.get(id);
                    if (!link) return;

                    if (entry.isIntersecting) link.classList.add("active");
                    else link.classList.remove("active");
                });
                }, { rootMargin: "0px 0px -70% 0px", threshold: 0.1 });

                headings.forEach(h => observer.observe(h));
            }

            function setupBackToTop() {
                const btn = document.getElementById("backToTop");
                if (!btn) return;

                window.addEventListener("scroll", () => {
                btn.style.display = (window.scrollY > 400) ? "block" : "none";
                });

                btn.addEventListener("click", () => {
                window.scrollTo({ top: 0, behavior: "smooth" });
                });
            }
            })();
        </script>
    </head>

    <body>
        <!--顶部-->
        <header class="page-header">
            <h1 class="doc-title m-0"><a class="nav-link" href="../../index.html">Anchor's Home</a></h1>

            <div class="d-flex align-items-center gap-1">
                <div class="btn-group me-1" role="group" aria-label="Theme">
                    <button class="btn-icon" type="button" onclick="__setLight()" title="Light mode" aria-label="Switch to light mode">
                        <i class="fa-solid fa-sun" aria-hidden="true"></i>
                    </button>
                    <button class="btn-icon" type="button" onclick="__setDark()" title="Dark mode" aria-label="Switch to dark mode">
                        <i class="fa-solid fa-moon" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </header>

        <div class="layout">
            <!--侧边栏-->
            <aside class="sidebar-primary">
                <nav aria-label="Chapters" id="sideNav">
                    <!-- 英文列表 -->
                    <ul class="list-unstyled bd-sidenav nav-en">
                        <li><a class="nav-link" href="../../index.html">Back to Homepage</a></li>
                        <li><a class="nav-link" href="../Creation_of_Adam.html">Back to Last Page</a></li>
                    </ul>
            </aside>
            <!--主体内容-->
            <main class="content-wrap">
                <div>
                    <img src="../../Creation_of_Adam.jpg" alt="Creation_of_Adam" style="width:100%; height:100%; object-fit:contain;">
                    <h1 style="font-family: 'Times New Roman'; text-align:center;">For "Small Anchor"</p>
                </div>
                <!--内容列表-->
                <div class="index-list">
                    <ul>
                        <li><a class="nav-link" href="./vectors/vectors.html">vectors</a></li>
                    </ul>
                </div>
            </main>

            <button class="btn btn-primary rounded-pill" id="backToTop">
            <i class="fa-solid fa-arrow-up"></i> Back to top
            </button>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        </div>
    </body>
</html>
